<?php $__env->startSection("content"); ?>


<head>
    <title>DTR Manual Edit | Time and Electronic Attendance Monitoring System</title>
</head>

<h1 style='margin-left:70px;'>Daily Time Record Manual Edit</h1>

<div class="row">
	<div class="col-md-12" style="margin-top:40px" align="center">
        <?php echo Form::open(array('url' => 'queries/dtr', 'method' => 'post', 'autocomplete' => 'off')); ?>

		<div class="col-md-4">
			<div class="label_white">
			<?php echo Form::label('layout', ' Select an Employee:'); ?> </div>
			<?php echo Form::select('employs_id',$employs_id, Input::get('employs_id'), array('class' => 'btn btn-default dropdown-toggle')); ?><br>
		</div>
		<div class="col-md-8">
			
			<div class="col-md-2">

				<div class="label_white"><?php echo Form::label('layout', ' Month:'); ?></div>
				<?php echo Form::selectMonth('month', Input::get('month'), array('class' => 'btn btn-default dropdown-toggle')); ?><br>
			</div>

			<div class="col-md-3">
				<div class="label_white">
			
				<?php echo Form::label('layout', ' Year:'); ?>  </div>
				<?php echo Form::selectRange('year', $year, 1995  , Input::get('year'), array('class' => 'btn btn-default dropdown-toggle')); ?><br>
			</div>
            <div class="col-md-2">
                <div class="label_white" style="margin-top:5px">
                    <br>
                     <td>  <?php echo Form::submit('Go', array('class' => 'btn btn-warning', 'style'=>'padding-left:30px; padding-right:30px; padding-top:7px; padding-bottom:7px;')); ?></td><br>
                 </div>
        <?php echo Form::close(); ?>

		</div>
	</div>
</div>
<br><br>
<?php if($is_post == 'true'): ?>
  <?php echo Form::open(array('url' => 'queries/dtr_adjusted', 'method' => 'post', 'autocomplete' => 'off')); ?>

  
  <?php echo Form::hidden('emp_id', $emp_id); ?>

  <?php echo Form::hidden('employs_id', Input::get('employs_id')); ?>

  <?php echo Form::hidden('month', Input::get('month')); ?>

  <?php echo Form::hidden('year', $get_year); ?>

<div class = 'col-md-4' style='margin-top:50px; margin-left:90px;'>
     <h3 style=' color:white; margin-top:-10px;'>Adjust Daily Time Record</h3><br>
      <div class="label_white"><?php echo Form::label('dtr_date', 'Date:'); ?></div>
                <?php echo Form::text('dtr_date',Input::get('dtr_date'), array('autocomplete' => 'off', 'size' => '35','id' => 'calendar','placeholder' => 'yyyy-mm-dd')); ?><br>
      <div class="label_white"><?php echo Form::label('time_in', 'Time-in:'); ?></div>
             <div class="input-group clockpicker" style = "background-color:white;">
            <?php echo Form::text('time_in', Input::get('time_in'), array('placeholder' => '00:00:00','autocomplete' => 'off', 'size' => '35')); ?></div>
      <div class="label_white"><?php echo Form::label('time_out', 'Time-out:'); ?></div>
             <div class="input-group clockpicker" style = "background-color:white;">
            <?php echo Form::text('time_out', Input::get('time_out'), array('placeholder' => '00:00:00','autocomplete' => 'off', 'size' => '35')); ?></div><br>
            <div class = 'col-md-5' style="margin-left:-15px">
            <input class = 'btn btn-info' type="submit" name="Change" value="Make Changes">
                </div>
            <div class = 'col-md-5'>
            <input class = 'btn btn-danger' type="submit" name="Delete" value="Delete"><br>
            </div>
    <?php echo Form::close(); ?>

                  
</div>

<div class = 'col-md-4' style='margin-top:50px; margin-left:90px;  border-style: solid;
    border-width: 3px; border-color:white;'>
    <?php foreach($employee as $emp): ?>
   <center> <h4 style=' color:white;'><?php echo $emp->lname; ?>, <?php echo $emp->fname; ?></h4></center><br>
    <center> <h5 style=' color:white; margin-top:-20px'>Daily Time Record as of <?php echo $month_name; ?> <?php echo $get_year; ?></h5></center><br>
    <?php endforeach; ?>
    <hr style='margin-top:-10px;'>
         <div class ='col-md-4' style="color:white; margin-top:-15px;" >  
            <center><h2>DAY</h2></center><br>
           <?php for($date = 1; $date <= 31; $date++): ?>
              <? $curr_date = $year.'-'.date("m", mktime(0, 0, 0, $month, $month)).'-'.date("d", mktime(0, 0, 0, $month, $date));?>
          
                           <center>  <div class="label_white" style="margin-bottom:1px"><?php echo Form::label('day', $date); ?></center>
                            <br> 
          

                <?php endfor; ?>
         </div>
        <div class ='col-md-4' style="margin-top:-15px;">
               <center><h2>AM</h2></center><br>

                <?php for($date = 1; $date <= 31; $date++): ?>
                      <?php $curr_date = $year.'-'.date("m", mktime(0, 0, 0, $month, $month)).'-'.date("d", mktime(0, 0, 0, $month, $date));?>

                      <?php $hasTimeIn = false; ?>
                        <?php foreach($punch_in as $in): ?>
                            <?php if( $curr_date == $in->date): ?>
                            
                                 <?php echo Form::text('time_in', $in->time, array('autocomplete' => 'off', 'size' => '10')); ?> <br> <br>
                                  <?php $hasTimeIn = true; ?>
                            <?php endif; ?>
                             

                               
                        <?php endforeach; ?>
                         <?php if($hasTimeIn == false): ?>
                                   <?php echo Form::text('time_in', ' ', array('autocomplete' => 'off', 'size' => '10')); ?>   <br> <br>
                        <?php endif; ?>
                <?php endfor; ?>
                </div>
                <div class ='col-md-4' style="margin-top:-15px;">
                <center><h2>PM</h2> </center> <br>
                    <?php for($date = 1; $date <= 31; $date++): ?>
                      <?php $curr_date = $year.'-'.date("m", mktime(0, 0, 0, $month, $month)).'-'.date("d", mktime(0, 0, 0, $month, $date));?>

                      <?php $hasTimeOut = false; ?>
                <?php foreach($punch_out as $out): ?>
                            <?php if( $curr_date == $out->date): ?>
                            
                                 <?php echo Form::text('time_out', $out->time, array('autocomplete' => 'off', 'size' => '10')); ?> <br> <br>
                                  <?php $hasTimeOut = true; ?>
                            <?php endif; ?>
                             

                               
                        <?php endforeach; ?>
                         <?php if($hasTimeOut == false): ?>
                                   <?php echo Form::text('time_out', ' ', array('autocomplete' => 'off', 'size' => '10')); ?>   <br> <br>
                        <?php endif; ?>
                <?php endfor; ?>
               </div>       
</div>
<?php endif; ?>
</div>
<script type="text/javascript">
$('.clockpicker').clockpicker();
</script>

<script type="text/javascript">
    window.onload = function() {
    if(!window.location.hash) {        
        window.location = window.location + '#loaded';
        window.location.reload();
    }
}
</script>

<script type="text/javascript">
    $('#calendar').datepicker({
        format: "yyyy-mm-dd"
    });
</script>

<?php $__env->stopSection(); ?>
<?php echo $__env->make("layout", array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>